pipeline {
    agent any

    stages {
        stage('Git checkout') {
            steps {
               git 'https://github.com/tkibnyusuf/opedinas-project.git'
            }
        }
       stage('Build') {
            steps {
               sh ''' cd MywebApp && mvn clean package'''
            }
        }
      stage('Test') {
            steps {
                sh ' cd MywebApp && mvn test'

            }
      }          
                
      stage('deploy to tomcat') {
            steps {
                deploy adapters: [tomcat9(credentialsId: '0dad21c5-254d-4714-a23c-6e8a55b0a543', path: '', url: 'http://34.227.46.188:8080/')], contextPath: 'myapp', war: '**/*.war'
                
            }   
                
      }        
                
    }
}   
